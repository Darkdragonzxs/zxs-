<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game Welcome</title>
<style>
  body {
    margin: 0;
    background: #0b0b0b;
    font-family: "Inter", sans-serif;
    overflow: hidden;
  }

  iframe {
    width: 100vw;
    height: 100vh;
    border: none;
    position: relative;
    z-index: 1;
  }

  /* Welcome screen */
  #welcomeScreen {
    position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: #0b0b0b;
    color: #eaeaea;
    z-index: 3000;
    text-align: center;
    transition: opacity 0.5s ease;
  }

  #welcomeScreen h1 {
    font-size: 3em;
    margin-bottom: 20px;
  }

  #welcomeScreen p {
    font-size: 1.2em;
    margin-bottom: 40px;
  }

  #welcomeScreen button {
    padding: 14px 28px;
    font-size: 18px;
    color: #fff;
    background: linear-gradient(145deg, #2a82e4, #1b66b3);
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: 0.3s ease;
  }

  #welcomeScreen button:hover {
    background: linear-gradient(145deg, #1b66b3, #2a82e4);
  }

  /* Existing overlay */
  #fullscreenOverlay {
    position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(18px) saturate(160%);
    -webkit-backdrop-filter: blur(18px) saturate(160%);
    background: rgba(25, 25, 25, 0.55);
    border: 1px solid rgba(255, 255, 255, 0.05);
    z-index: 2000;
    color: #eaeaea;
    text-align: center;
    transition: opacity 0.4s ease;
  }

  #fullscreenOverlay.hide {
    opacity: 0;
    visibility: hidden;
  }
</style>
</head>
<body>
  <iframe src="/cloudmoon/game/com.roblox.client/"></iframe>

  <!-- Welcome Screen -->
  <div id="welcomeScreen">
    <h1>Welcome to Cloudmoon!</h1>
    <p>Get ready to jump into your favorite games safely and smoothly.</p>
    <button id="continueBtn">Continue</button>
  </div>

  <!-- Existing overlay -->
  <div id="fullscreenOverlay">
    <h2 id="titleText">Click Play</h2>

    <!-- Step 1 -->
    <button id="playBtn">Play</button>

    <!-- Step 2 -->
    <div id="serverSelectContainer" style="display:none;">
      <h3>Select Server</h3>
      <select id="serverSelect">
        <option>US West</option>
        <option>US East</option>
        <option>Europe</option>
        <option>Asia</option>
      </select>
      <button id="nextServer">Next</button>
    </div>

    <!-- Step 3 -->
    <div id="signInPasswordContainer" style="display:none;">
      <button id="signInPasswordBtn">Sign in with password</button>
    </div>

    <!-- Step 4 -->
    <div id="loginContainer" style="display:none;">
      <input type="text" placeholder="Google account email">
      <input type="password" placeholder="Password">
      <div id="dialogueBox">Make sure to use your Cloudmoon credentials.</div>
      <button id="confirmLogin">Sign in</button>
    </div>

    <!-- Step 5 -->
    <div id="clickPlayContainer" style="display:none;">
      <button id="clickPlayBtn">Click Play</button>
    </div>

    <!-- Step 6 -->
    <div id="finalPlayContainer" style="display:none;">
      <button id="finalPlayBtn">Play Game</button>
    </div>

    <div id="loadingBarContainer"><div id="loadingBar"></div></div>
    <div id="statusMessage"></div>
  </div>

<script>
  // Welcome screen
  const welcomeScreen = document.getElementById("welcomeScreen");
  const continueBtn = document.getElementById("continueBtn");

  continueBtn.onclick = () => {
    welcomeScreen.style.opacity = 0;
    setTimeout(() => welcomeScreen.remove(), 500);
  };

  // Existing overlay logic
  const steps = [
    "playBtn",
    "serverSelectContainer",
    "signInPasswordContainer",
    "loginContainer",
    "clickPlayContainer",
    "finalPlayContainer"
  ];

  let currentStep = 0;
  const overlay = document.getElementById("fullscreenOverlay");
  const titleText = document.getElementById("titleText");
  const statusMsg = document.getElementById("statusMessage");
  const loadingBarContainer = document.getElementById("loadingBarContainer");
  const loadingBar = document.getElementById("loadingBar");

  function showStep(index) {
    steps.forEach((id, i) => {
      const el = document.getElementById(id);
      if (el.tagName === "DIV") {
        el.style.display = i === index ? "flex" : "none";
        el.style.flexDirection = "column";
        el.style.alignItems = "center";
      } else {
        el.style.display = i === index ? "block" : "none";
      }
    });
    titleText.textContent = [
      "Click Play",
      "Select Server",
      "Click Sign in with Password",
      "Confirm Login",
      "Click Play",
      "Play Game"
    ][index];
  }

  function nextStep() {
    currentStep++;
    if (currentStep < steps.length) {
      showStep(currentStep);
    } else {
      simulateLoading();
    }
  }

  function simulateLoading() {
    loadingBarContainer.style.display = "block";
    statusMsg.textContent = "Loading...";
    let duration = 3000 + Math.random() * 2000;
    let start = null;

    function animate(timestamp) {
      if (!start) start = timestamp;
      let progress = Math.min((timestamp - start) / duration, 1);
      loadingBar.style.width = progress * 100 + "%";
      if (progress < 1) {
        requestAnimationFrame(animate);
      } else {
        statusMsg.textContent = "Enjoy your game!";
        setTimeout(() => overlay.style.opacity = 0, 1000);
        setTimeout(() => overlay.remove(), 2000);
      }
    }
    requestAnimationFrame(animate);
  }

  // Bind buttons
  document.getElementById("playBtn").onclick = nextStep;
  document.getElementById("nextServer").onclick = nextStep;
  document.getElementById("signInPasswordBtn").onclick = nextStep;
  document.getElementById("confirmLogin").onclick = nextStep;
  document.getElementById("clickPlayBtn").onclick = nextStep;
  document.getElementById("finalPlayBtn").onclick = simulateLoading;

  showStep(currentStep);
</script>
</body>
</html>
